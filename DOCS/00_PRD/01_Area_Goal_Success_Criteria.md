# План реализации: iOS приложение «Диктофон» (SwiftUI)

> УЧТЁН ОСОБЫЙ ДИЗАЙН по присланному скриншоту. Целевая платформа: iOS 16+. Язык: Swift 5.10+, UI: SwiftUI, аудио: AVFoundation (AVAudioSession/Engine), публикация в App Store.

---

## 1) Область, цель, критерии успеха

**Цель:** реализовать офлайн‑диктофон с профессиональными функциями записи/воспроизведения, файловым менеджером и поддержкой закладок/метаданных, соответствующий предоставленному дизайну.

**Основные сценарии:**
- Запись аудио с индикацией уровня L/R, пауза, возобновление, стоп, сохранение с метаданными.
- Воспроизведение с прогресс‑баром, быстрыми перемотками (тап ±10с и удержание со скраббингом), петлёй A‑B, DPC (изменение питча и скорости), громкость общей и поканальной L/R, блокировкой UI.
- Управление файлами: список, атрибуты, закладки (T‑MARK), последняя позиция, копирование/удаление, свободное место.

**Критерии успеха (приёмка релиза 1.0):**
- Запись/пауза/стоп стабильны ≥60 мин без утечек, приложение остаётся в фоне (Background Audio).
- Метры L/R отображают среднюю и пиковую мощность с частотой обновления ≥20 Гц и погрешностью ≤1 дБ.
- Воспроизведение корректно: перемотки, удержание, A‑B луп, регулировки DPC и громкости без артефактов.
- Список файлов отображает требуемые атрибуты и операции (копия, удаление) без блокировки UI.
- Дизайн соответствует макету (цвета, типографика, иконография, расположение).
- 0 крашей в стаб‑тесте (30 мин микс сценариев), энергопотребление в фоне ≤5%/час на iPhone 13.

**Ограничения и допущения:**
- **Формат записи по умолчанию:** AAC (m4a), 44.1 kHz, 128–256–320 kbps (настраивается). *(Запись MP3 системно не поддерживается; экспорт в MP3 возможен отдельным этапом через внешнюю либу — см. «Расширения».)*
- Хранение файлов в sandbox: `/Documents/Recordings/…`
- Минимум iOS 16 для стабильной работы SwiftUI и AudioEngine.
- Локализации: RU (v1.0), EN (после).